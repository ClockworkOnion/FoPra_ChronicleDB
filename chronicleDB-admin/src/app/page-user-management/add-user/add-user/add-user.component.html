<div style="margin: 16px;">
  <h2>Add a new User</h2>

  <form [formGroup]="form">
    <div class="form-group">
      <mat-form-field appearance="fill">
        <mat-label>Username</mat-label>
        <input matInput maxlength="20" type="text" formControlName="username">
      </mat-form-field>

    </div>
    <div class="form-group">
      <mat-form-field appearance="fill">
        <mat-label>Password</mat-label>
        <input matInput [type]="hide ? 'password' : 'text'" formControlName="password">
        <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'"
          [attr.aria-pressed]="hide">
          <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
        </button>
      </mat-form-field>
    </div>

    <div style="margin-bottom: 8px;">
      <mat-checkbox class="example-margin" formControlName="isAdmin" (change)="onAdminCheckBoxClicked()" matTooltip="Check if the user is an admin.">
        Admin
      </mat-checkbox>
      &nbsp;
      <mat-checkbox class="example-margin" formControlName="usesJavaVersion"  matTooltip="Choose If Version should be Java.">
        Java
      </mat-checkbox>
      &nbsp;
      <mat-checkbox class="example-margin" formControlName="canCreateStream" matTooltip="Allow User to create Streams">
        Create Streams</mat-checkbox>
    </div>

    <div style="margin-bottom: 8px;">
      <mat-checkbox class="example-margin" formControlName="allStreamsAllowed" matTooltip="Check if the user shall see and read from all streams."
      (change)="updateReadingSelection()">Full Reading Rights</mat-checkbox>
      &nbsp;
      <mat-checkbox class="example-margin" formControlName="canInsertAll"
        matTooltip="Allow User to insert into all Streams" (change)="updateWritingSelection()">Full Writing Rights
      </mat-checkbox>
    </div>

    <div class="form-group">
      <mat-form-field appearance="fill" matTooltip="Choose the Streams that the User can edit">
        <mat-label>Allowed Reading Streams</mat-label>
        <mat-select multiple formControlName="allowedStreams">
          <mat-option *ngFor="let id of arrayID" [value]="id">{{id}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="form-group">
      <mat-form-field appearance="fill" matTooltip="Give write access to specific streams.">
        <mat-label>Allowed Writing on Streams</mat-label>
        <mat-select multiple formControlName="allowedInsertStreams">
          <mat-option *ngFor="let id of arrayID" [value]="id">{{id}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div style="text-align: center; margin-top: 16px;">
      <button [disabled]="this.form.invalid" mat-dialog-close mat-raised-button color="primary" (click)="onSubmit()"
        [mat-dialog-close]="true">
        Add a New User
      </button>
      &nbsp;
      <button mat-dialog-close mat-raised-button color="warn" [mat-dialog-close]="false">
        Cancel
      </button>
    </div>
  </form>
</div>